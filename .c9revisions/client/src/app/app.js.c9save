{"ts":1380228859720,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"angular.module('app', [\n  'ngRoute',\n  'projectsinfo',\n  'dashboard',\n  'projects',\n  'admin',\n  'services.breadcrumbs',\n  'services.i18nNotifications',\n  'services.httpRequestTracker',\n  'security',\n  'directives.crud',\n  'templates.app',\n  'templates.common']);\n\nangular.module('app').constant('MONGOLAB_CONFIG', {\n  baseUrl: '/databases/',\n  dbName: 'meteormongodb'\n});\n\n//TODO: move those messages to a separate module\nangular.module('app').constant('I18N.MESSAGES', {\n  'errors.route.changeError':'Route change error',\n  'crud.user.save.success':\"A user with id '{{id}}' was saved successfully.\",\n  'crud.user.remove.success':\"A user with id '{{id}}' was removed successfully.\",\n  'crud.user.remove.error':\"Something went wrong when removing user with id '{{id}}'.\",\n  'crud.user.save.error':\"Something went wrong when saving a user...\",\n  'crud.project.save.success':\"A project with id '{{id}}' was saved successfully.\",\n  'crud.project.remove.success':\"A project with id '{{id}}' was removed successfully.\",\n  'crud.project.save.error':\"Something went wrong when saving a project...\",\n  'login.reason.notAuthorized':\"You do not have the necessary access permissions.  Do you want to login as someone else?\",\n  'login.reason.notAuthenticated':\"You must be logged in to access this part of the application.\",\n  'login.error.invalidCredentials': \"Login failed.  Please check your credentials and try again.\",\n  'login.error.serverError': \"There was a problem with authenticating: {{exception}}.\"\n});\n\nangular.module('app').config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {\n  $locationProvider.html5Mode(true);\n  $routeProvider.otherwise({redirectTo:'/projectsinfo'});\n}]);\n\nangular.module('app').run(['security', function(security) {\n  // Get the current user when the application starts\n  // (in case they are still logged in from a previous session)\n  security.requestCurrentUser();\n}]);\n\nangular.module('app').controller('AppCtrl', ['$scope', 'i18nNotifications', 'localizedMessages', function($scope, i18nNotifications) {\n\n  $scope.notifications = i18nNotifications;\n\n  $scope.removeNotification = function (notification) {\n    i18nNotifications.remove(notification);\n  };\n\n  $scope.$on('$routeChangeError', function(event, current, previous, rejection){\n    i18nNotifications.pushForCurrentRoute('errors.route.changeError', 'error', {}, {rejection: rejection});\n  });\n}]);\n\nangular.module('app').controller('HeaderCtrl', ['$scope', '$location', '$route', 'security', 'breadcrumbs', 'notifications', 'httpRequestTracker',\n  function ($scope, $location, $route, security, breadcrumbs, notifications, httpRequestTracker) {\n  $scope.location = $location;\n  $scope.breadcrumbs = breadcrumbs;\n\n  $scope.isAuthenticated = security.isAuthenticated;\n  $scope.isAdmin = security.isAdmin;\n\n  $scope.home = function () {\n    if (security.isAuthenticated()) {\n      $location.path('/dashboard');\n    } else {\n      $location.path('/projectsinfo');\n    }\n  };\n\n  $scope.isNavbarActive = function (navBarPath) {\n    return navBarPath === breadcrumbs.getFirst().name;\n  };\n\n  $scope.hasPendingRequests = function () {\n    return httpRequestTracker.hasPendingRequests();\n  };\n}]);\n"]],"start1":0,"start2":0,"length1":0,"length2":3217}]],"length":3217}
